<!DOCTYPE html>
<html lang="en">
<head>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Borough Averages Map</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  
</head>

<body>
{% include 'navbar.html' %}
<div id="heading">
  <h1>Average Lead and Copper Content in Tap Water Across the Boroughs in 2023</h1>
</div>
<div id="keyc">
  <h2>Color Key</h2>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 0%);"></span>0 (µg/l,mg/l)</div>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 7%);"></span>1 (µg/l,mg/l)</div>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 15%);"></span>2 (µg/l,mg/l)</div>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 20%);"></span>3 (µg/l,mg/l)</div>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 32%);"></span>4 (µg/l,mg/l)</div>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 40%);"></span>5 (µg/l,mg/l)</div>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 45%);"></span>6 (µg/l,mg/l)</div>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 50%);"></span>7 (µg/l,mg/l)</div>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 55%);"></span>8 (µg/l,mg/l)</div>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 60%);"></span>9 (µg/l,mg/l)</div>
  <div><span class="keyc" style="background-color: hsl(161, 50%, 65%);"></span>10 (µg/l,mg/l)</div>
</div>

<div id="borough">
    {% include 'borough.svg' %}
</div>

<div id="text-based_summary">
  NYC's average combined Lead and Copper value is: 5.648(µg/l,mg/l)<br>
  Manhattan has the highest value at 7.118 (µg/l,mg/l), which means it has the highest average Lead + Copper in its tap water relative to all of the other boroughs. <br>
  (It is important to note that Manhattan's n=3, so the data is most likely unrepresentative of Manhattan's actual Lead and Copper values.) <br>
  Queens follows with the combined averages totalling 6.944 (µg/l,mg/l), meaning it has the second most Lead and Copper in its tap water relative to all other boroughs, only behind Manhattan. <br>
  Queens has relatively poor overall water quality. <br>
  Brooklyn has the median value of 5.850 (µg/l,mg/l), meaning it has less Lead and Copper in its tap water than Queens and Manhattan but more Lead and Copper in its water than Staten Island and the Bronx. <br>
  Brooklyn has slightly below average water quality. <br>
  Staten Island has a value of 4.877 (µg/l,mg/l). It has a lower combined average figure than Manhattan, Brooklyn, and Queens. <br>
  Staten Island has above average water quality. <br>
  The Bronx has a value of 3.449 (µg/l,mg/l) meaning it has the lowest average Copper and Lead in its water than all the other boroughs. <br> 
  The Bronx has the best water quality out of all the boroughs. <br>
  The difference of 3.669(µg/l,mg/l) between the highest borough's (Manhattan) and the lowest borough's (Bronx) combined averages illustrates the large range of water quality in NYC.

<h4>Key Takeaways</h4>
  As is expressed by the shading on the map, the water quality varies a lot between the boroughs. <br>
   Since NYC gets its water from three main reservoirs (Croton System, Catskill System, and Delaware System), the variation in water quality is most likely not due to differences in each borough's water source (All boroughs share the same three sources). <br>
   It is improtant to note that all of NYC's water gets treated at a facility built in 2013. Assuming that this facility's filtration methods are up to standards, then the piping across NYC is what is most likely accounting for the large differences in the Lead and Copper values by borough. <br>
   The vast differences in water quality between zip codes is made evident through the individual borough pages linked at the top of the webpage. <br>
   The individual borough graphs further stress the fact that differences in water quality are largely accute and pertain to very significant areas, these areas could potentially be where the pipes are older or have experienced more use.
   <br>
  </p>

  <h4>Note</h4>
  It is important to note that while Manhattan has the highest average Lead and Copper values overall, its top zip codes for both Lead and Copper (only 3) have the smallest overall percentage increase relative to NYC average. <br>
  This is due to the fact that while other boroughs may have zip codes with significantly higher Copper or Lead percentage increases relative to the NYC average, they also have many more overall data points. <br>
  These data points normalize the borough average in comparison to the 5 largest zip codes for either Lead or Copper.
  </p>
</div>

  {% include 'footer.html' %}

</body> 
<script>

  bronx = document.getElementsByClassName("Bronx")
  for (let i = 0; i <bronx.length; i++){
    bronx[i].setAttribute("fill", "hsl(161, 50%, {{7 * borough_averages['Bronx']}}%)");
  }

  brooklyn = document.getElementsByClassName("Brooklyn")
  for (let i = 0; i <brooklyn.length; i++){
    brooklyn[i].setAttribute("fill", "hsl(161, 50%, {{ 7* borough_averages['Brooklyn']}}%)");
  }

  manhattan = document.getElementsByClassName("Manhattan")
  for (let i = 0; i <manhattan.length; i++){
    manhattan[i].setAttribute("fill", "hsl(161, 50%, {{7 * borough_averages['Manhattan']}}%)");
  }

  queens = document.getElementsByClassName("Queens")
  for (let i = 0; i <queens.length; i++){
    queens[i].setAttribute("fill", "hsl(161, 50%, {{7 * borough_averages['Queens']}}%)");
  }

  staten_island = document.getElementsByClassName("Straten_Island")
  for (let i = 0; i <staten_island.length; i++){
    staten_island[i].setAttribute("fill", "hsl(161, 50%, {{7 * (borough_averages['Staten Island'])}}% )");
  }


</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
